{% load static %}
{% load custom_filters %}
<!DOCTYPE HTML>
<html lang="en">
<head>
    <style>
        .alert {
            display: none;
            animation: fadeInOut 5s ease-in-out;
        }

        @keyframes fadeInOut {
            0%, 100% {
            opacity: 0;
            }
            10%, 90% {
            opacity: 1;
            }
        }
    </style>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="#121212">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <title>User Profile</title>
    <link rel="stylesheet" type="text/css" href="{% static 'styles/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fonts/bootstrap-icons.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'styles/style.css' %}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="{% static '_manifest.json' %}">
    <meta id="theme-check" name="theme-color" content="#FFFFFF">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'app/icons/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'app/icons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'app/icons/favicon-16x16.png' %}">
    <script type='text/javascript' data-cfasync='false'>window.purechatApi = { l: [], t: [], on: function () { this.l.push(arguments); } }; (function () { var done = false; var script = document.createElement('script'); script.async = true; script.type = 'text/javascript'; script.src = 'https://app.purechat.com/VisitorWidget/WidgetScript'; document.getElementsByTagName('HEAD').item(0).appendChild(script); script.onreadystatechange = script.onload = function (e) { if (!done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) { var w = new PCWidget({ c: '4474f646-182d-4735-8359-eb7d4c1109db', f: true }); done = true; } }; })();</script>
</head>

<body class="theme-light">

<div id="preloader"><div class="spinner-border color-highlight" role="status"></div></div>

<!-- Page Wrapper-->
<div id="page">

    <!-- Footer Bar -->
    <div id="footer-bar" class="footer-bar-1 footer-bar-detached">
        <a href="{% url 'wallet' %}" class="active-nav"><i class="bi bi-wallet2"></i><span>Cards</span></a>
        <a href="{% url 'activities' %}"><i class="bi bi-graph-up"></i><span>Activity</span></a>
        <a href="{% url 'home' %}" class="circle-nav-2"><i class="bi bi-house-fill"></i><span>Home</span></a>
        <a href="{% url 'page_payment' %}"><i class="bi bi-receipt"></i><span>Payments</span></a>
        <a href="#" data-bs-toggle="offcanvas" data-bs-target="#menu-sidebar"><i class="bi bi-three-dots"></i><span>More</span></a>
    </div>

    <!-- Page Content - Only Page Elements Here-->
    <div class="page-content footer-clear">

       <!-- Page Title-->
       <div class="pt-3 disabled">
           <div class="page-title d-flex">
               <div class="align-self-center me-auto">
                   <p class="color-white">Hello from</p>
                   <h1 class="color-white">ProfitPulse</h1>
               </div>
               <div class="align-self-center ms-auto">
                      <a href="#"
                      data-bs-toggle="offcanvas"
                      data-bs-target="#menu-sidebar"
                      class="icon bg-white rounded-m">
                          <i class="bi bi-list font-20"></i>
                      </a>
                  </div>
           </div>
       </div>
       <svg id="header-deco" viewBox="0 0 1440 600" xmlns="http://www.w3.org/2000/svg">
           <path id="header-deco-1" d="M 0,600 C 0,600 0,120 0,120 C 92.36363636363635,133.79904306220095 184.7272727272727,147.59808612440193 287,148 C 389.2727272727273,148.40191387559807 501.4545454545455,135.40669856459328 592,129 C 682.5454545454545,122.5933014354067 751.4545454545455,122.77511961722489 848,115 C 944.5454545454545,107.22488038277511 1068.7272727272727,91.49282296650718 1172,91 C 1275.2727272727273,90.50717703349282 1357.6363636363635,105.25358851674642 1440,120 C 1440,120 1440,600 1440,600 Z"></path>
           <path id="header-deco-2" d="M 0,600 C 0,600 0,240 0,240 C 98.97607655502392,258.2105263157895 197.95215311004785,276.4210526315789 278,282 C 358.04784688995215,287.5789473684211 419.16746411483257,280.5263157894737 524,265 C 628.8325358851674,249.4736842105263 777.377990430622,225.47368421052633 888,211 C 998.622009569378,196.52631578947367 1071.3205741626793,191.57894736842107 1157,198 C 1242.6794258373207,204.42105263157893 1341.3397129186603,222.21052631578948 1440,240 C 1440,240 1440,600 1440,600 Z"></path>
           <path id="header-deco-3" d="M 0,600 C 0,600 0,360 0,360 C 65.43540669856458,339.55023923444975 130.87081339712915,319.1004784688995 245,321 C 359.12918660287085,322.8995215311005 521.9521531100479,347.1483253588517 616,352 C 710.0478468899521,356.8516746411483 735.3205741626795,342.3062200956938 822,333 C 908.6794258373205,323.6937799043062 1056.7655502392345,319.62679425837325 1170,325 C 1283.2344497607655,330.37320574162675 1361.6172248803828,345.1866028708134 1440,360 C 1440,360 1440,600 1440,600 Z"></path>
           <path id="header-deco-4" d="M 0,600 C 0,600 0,480 0,480 C 70.90909090909093,494.91866028708137 141.81818181818187,509.8373205741627 239,499 C 336.18181818181813,488.1626794258373 459.6363636363636,451.5693779904306 567,446 C 674.3636363636364,440.4306220095694 765.6363636363636,465.88516746411483 862,465 C 958.3636363636364,464.11483253588517 1059.8181818181818,436.8899521531101 1157,435 C 1254.1818181818182,433.1100478468899 1347.090909090909,456.555023923445 1440,480 C 1440,480 1440,600 1440,600 Z"></path>
       </svg>

       <div class="notch-clear"></div>
       <div class="pt-5 mt-4"></div>
            {% for message in messages %}
            {% if 'error' in message.tags and 'profile' in message.tags %}
            <div style="z-index: 999;" class="alert alert-danger alert-dismissible fade show" role="alert">{{message}}</div>
            {% endif %}
            {% if 'success' in message.tags and 'profile' in message.tags %}
            <div style="z-index: 999;" class="alert alert-success alert-dismissible fade show" role="alert">{{message}}</div>
            {% endif %}
            {% endfor %}
       <div class="card card-style overflow-visible mt-5">
           <div class="mt-n5"></div>
           <img src="{{profile_image.url}}" alt="img" height="180" width="180" class="mx-auto rounded-circle mt-n5 shadow-l">
           <h1 class="color-theme text-center font-30 pt-3 mb-0">{{user.first_name}}, {{user.last_name}}</h1>
           {% if 'Awaiting' in UserDetails.VerificationStatus %}
           <p class="text-center font-11 color-yellow-dark"><i class="bi bi-x-circle-fill color-yellow-dark pe-2"></i>Verification pending.</p>
           {% elif 'Failed' in UserDetails.VerificationStatus %}
            <p class="text-center font-11 color-red-dark"><i class="bi bi-x-circle-fill color-red-dark pe-2"></i>Verification failed</p>
            {% elif 'Verified' in UserDetails.VerificationStatus %}
            <p class="text-center font-11"><i class="bi bi-check-circle-fill color-green-dark pe-2"></i>Verified Account Holder.</p>
            {% elif 'Under review' in UserDetails.VerificationStatus %}
            <p class="text-center font-11 color-yellow-dark"><i class="bi bi-x-circle-fill color-yellow-dark pe-2"></i>Under review.</p>
            {% endif %}
           <div class="content mt-0 mb-2">
                <div class="list-group list-custom list-group-flush list-group-m rounded-xs">
                    <a href="#" class="list-group-item" data-bs-toggle="offcanvas" data-bs-target="#menu-information">
                        <i class="bi bi-person-circle"></i>
                        <div>Information</div>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="#" class="list-group-item" data-bs-toggle="offcanvas" data-bs-target="#menu-notifications">
                        <i class="bi bi-bell-fill"></i>
                        <div>Notifications</div>
                        <span class="badge rounded-xl">{{notifications_count}}</span>
                    </a>
                    <a href="{%url 'page_payment' %}" class="list-group-item">
                        <i class="bi bi-credit-card"></i>
                        <div>Go to Payments</div>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                    <a href="{% url 'crypto_reports' %}" class="list-group-item">
                        <i class="bi bi-bar-chart-fill"></i>
                        <div>Stats</div>
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </div>
           </div>
       </div>
       <button style="min-width: 95%;" onkeypress="tidioChatApi.display(true);tidioChatApi.open()" onclick="tidioChatApi.display(true);tidioChatApi.open()" class="btn btn-full mx-3 gradient-highlight shadow-bg shadow-bg-xs">Contact Support</button>

    </div>
    <!-- End of Page Content-->

    <!-- Off Canvas and Menu Elements-->
    <!-- Always outside the Page Content-->

    <!-- Main Sidebar Menu -->
    <div id="menu-sidebar"
        data-menu-active="nav-pages"
        data-menu-load="{% url 'opener' %}"
        class="offcanvas offcanvas-start offcanvas-detached rounded-m">
    </div>

    <div id="menu-highlights"
        data-menu-active="nav-pages"
        data-menu-load="{% url 'highlights' %}"
        class="offcanvas offcanvas-bottom offcanvas-detached rounded-m">
    </div>
    
    <div id="menu-information"
        class="offcanvas offcanvas-end">
        <div style="width:100vw">
            <!-- Page Title-->
           <div class="pt-3">
               <div class="page-title d-flex">
                   <div class="align-self-center">
                       <a href="#"
                       data-bs-dismiss="offcanvas"
                       class="me-3 ms-0 icon icon-xxs bg-theme rounded-s shadow-m">
                           <i class="bi bi-chevron-left color-theme font-14"></i>
                       </a>
                   </div>
                   <div class="align-self-center me-auto">
                       <h1 class="color-theme mb-0 font-18">Back to Profile</h1>
                   </div>
               </div>
           </div>
           <div class="content mt-0">
            <form action="{% url 'profile' %}" method="post">
                {% csrf_token %}
               <h5 class="pb-3 pt-4">Personal Information</h5>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input name="username" type="text" class="form-control rounded-xs" id="c1a" placeholder="{{user.username}}"/>
                   <label for="c1a" class="form-label-always-active color-highlight">Username</label>
                   <span>(current)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input readonly type="text" class="form-control rounded-xs" id="c1ab" placeholder="{{user.first_name}}" value="{{user.first_name}}"/>
                   <label for="c1ab" class="form-label-always-active color-highlight">First Name</label>
                   <span>(required)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input readonly type="text" class="form-control rounded-xs" id="c1abc" placeholder="{{user.last_name}}" value="{{user.last_name}}"/>
                   <label for="c1abc" class="form-label-always-active color-highlight">Last Name</label>
                   <span>(required)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input readonly type="email" class="form-control rounded-xs" id="c1" placeholder="{{user.email}}" value="{{user.email}}"/>
                   <label for="c1" class="color-highlight form-label-always-active">Email Address</label>
                   <span>(required)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input readonly type="text" class="form-control rounded-xs" id="c1" placeholder="{{UserDetails.Nationality}}" value="{{UserDetails.Nationality}}"/>
                   <label for="c1" class="color-highlight form-label-always-active">Nationality</label>
                   <span>(required)</span>
               </div>
               
               <h5 class="pb-3 pt-4">Default Card</h5>
               <div class="form-custom form-label form-border form-icon">
                   <i class="bi bi-calendar font-13"></i>
                   <label for="c6a" class="color-highlight form-label-always-active">Default Card</label>
                   <select class="form-select rounded-xs" id="c6a">
                    {% if cards %}
                    {% for card in cards %}
                       <option value="0" selected>{{card.expiry_date|date:"m/Y"}} | {{card.card_number|new_formatter}}</option>
                    {% endfor %}
                    {% else %}
                        <option disabled value="0" selected>No Cards</option>
                    {% endif %}
                   </select>
               </div>


                <h5 class="pb-3 pt-4">Payment details</h5>
                <!--  -->
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input name="tether_usdt" type="text" class="form-control rounded-xs" id="c1a" placeholder="Enter your USDT TRC20 wallet address" value="{{addresses.usdt_TRC20_address}}"/>
                   <label for="c1a" class="form-label-always-active color-highlight">Tether USDT TRC20 </label>
                   <span>(current)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input name="ethereum_usdt" type="text" class="form-control rounded-xs" id="c1ab" placeholder="Enter a USDT ERC20 address" value="{{addresses.usdt_ERC20_address}}"/>
                   <label for="c1ab" class="form-label-always-active color-highlight">USDT ERC20 </label>
                   <span>(current)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input name="ethereum" type="text" class="form-control rounded-xs" id="c1abc" placeholder="Enter Ethereum ETH wallet address" value="{{addresses.ethereum_address}}"/>
                   <label for="c1abc" class="form-label-always-active color-highlight">Ethereum Address </label>
                   <span>(current)</span>
               </div>
               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input name="bitcoin" type="text" class="form-control rounded-xs" id="c1" placeholder="Enter a Bitcoin wallet address" value="{{addresses.bitcoin_address}}"/>
                   <label for="c1" class="color-highlight form-label-always-active">Bitcoin Address </label>
                   <span>(current)</span>
               </div>
               <!--  -->
               
               <h5 class="pb-3 pt-4">Account Security</h5>

               <div class="form-custom form-label form-border mb-3 bg-transparent">
                   <input name="oldpassword" type="password" class="form-control rounded-xs" id="c2" placeholder="Current Password"/>
                   <label for="c2" class="color-highlight form-label-always-active">Current Password</label>
                   <span>(required)</span>
               </div>
               <div class="form-custom form-label form-border mb-4 bg-transparent">
                   <input name="password1" type="password" class="form-control rounded-xs" id="c3" placeholder="New Password"/>
                   <label for="c3" class="color-highlight form-label-always-active">New Password</label>
                   <span>(required)</span>
               </div>
                <div class="form-custom form-label form-border mb-4 bg-transparent">
                    <input name="password2" type="password" class="form-control rounded-xs" id="c3" placeholder="Confirm new password" />
                    <label for="c3" class="color-highlight form-label-always-active">Confirm Password</label>
                    <span>(required)</span>
                </div>
               <input style="min-width: 100%;" type="submit" href="#" class="btn btn-full gradient-highlight shadow-bg shadow-bg-s mt-4" value="Apply Changes"/>
            </form>
            <a style="min-width: 100%;" href="{% url 'password_reset' %}" class="btn btn-full gradient-red shadow-bg shadow-bg-s mt-4">Forgotten Password?</a>
           </div>
        </div>
    </div>


    <!-- Notifications Bell -->
    <div id="menu-notifications" data-menu-load="{% url 'notifications' %}"
        class="offcanvas offcanvas-top offcanvas-detached rounded-m">
    </div>
</div>
<!-- End of Page ID-->
<script src="//code.tidio.co/s7s7pkpgzioqwkyxuqph94yrpdafdwdh.js" async></script>
<script>
    (function () {
        function onTidioChatApiReady() {
            window.tidioChatApi.hide();
            window.tidioChatApi.on("close", function () {
                window.tidioChatApi.hide();
            });
        }

        if (window.tidioChatApi) {
            window.tidioChatApi.on("ready", onTidioChatApiReady);
        } else {
            document.addEventListener("tidioChat-ready", onTidioChatApiReady);
        }

        document.querySelector(".chat-button").addEventListener("click", function () {
            window.tidioChatApi.show();
            window.tidioChatApi.open();
        });
    })();
</script>
<script>
        document.addEventListener('DOMContentLoaded', function () {
            var alertElement = document.querySelector('.alert');


            alertElement.style.display = 'block';


            setTimeout(function () {
                alertElement.style.display = 'none';
            }, 5000);
        });
</script>
<script src="{% static 'scripts/bootstrap.min.js' %}"></script>
<script src="{% static 'scripts/custom.js' %}"></script>
</body>