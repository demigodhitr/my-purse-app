{% load static %}
<!DOCTYPE HTML>
<html lang="en">
<head>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            let deferredPrompt;

            window.addEventListener('beforeinstallprompt', (e) => {

                e.preventDefault();

                deferredPrompt = e;

                showInstallButton();
            });

            function showInstallButton() {
                const isIos = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
                const isAndroid = /Android/.test(navigator.userAgent);

                if (isIos) {
                    const iosModal = new bootstrap.Offcanvas(document.getElementById('menu-install-pwa-ios'));
                    iosModal.show();
                } else if (isAndroid) {
                    const androidModal = new bootstrap.Offcanvas(document.getElementById('menu-install-pwa-android'));
                    androidModal.show();
                }
            }

            function installPWA() {
                // Show the install prompt
                deferredPrompt.prompt();
                // Wait for the user to respond to the prompt
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                });
            }

            const installButton = document.querySelector('.pwa-install');
            if (installButton) {
                installButton.addEventListener('click', installPWA);
            }
        });
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, vieOpenwport-fit=cover" />
    <title>Get a purse acccount</title>
    <link rel="stylesheet" type="text/css" href="{% static 'styles/bootstrap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fonts/bootstrap-icons.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'styles/style.css' %}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="manifest" href="{% static '_manifest.json' %}">
    <meta id="theme-check" name="theme-color" content="#0000">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'app/icons/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'app/icons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'app/icons/favicon-16x16.png' %}">
    <style>
        select option {
            color: white;
            background-color: #000;
        }
    </style>
</head>

<body class="theme-dark">

<div id="preloader"><div class="spinner-border color-highlight" role="status"></div></div>

<!-- Page Wrapper-->
<div id="page">


    <!-- Page Content - Only Page Elements Here-->
    <div class="page-content footer-clear">

       <!-- Page Title-->
       <div class="pt-3">
           <div class="page-title d-flex">
               <div class="align-self-center me-auto">
                   <p class="color-white opacity-50 header-date"></p>
                   <h1 class="color-white">myPurse</h1>
               </div>
               <div class="align-self-center ms-auto">
                   <a href="#"
                   data-bs-toggle="offcanvas"
                   data-bs-target="#menu-sidebar"
                   class="icon bg-white rounded-m">
                       <i class="bi bi-list font-20"></i>
                   </a>
               </div>
           </div>
       </div>

       <svg id="header-deco" viewBox="0 0 1440 600" xmlns="http://www.w3.org/2000/svg" class="transition duration-300 ease-in-out delay-150">
           <path id="header-deco-1" d="M 0,600 C 0,600 0,120 0,120 C 92.36363636363635,133.79904306220095 184.7272727272727,147.59808612440193 287,148 C 389.2727272727273,148.40191387559807 501.4545454545455,135.40669856459328 592,129 C 682.5454545454545,122.5933014354067 751.4545454545455,122.77511961722489 848,115 C 944.5454545454545,107.22488038277511 1068.7272727272727,91.49282296650718 1172,91 C 1275.2727272727273,90.50717703349282 1357.6363636363635,105.25358851674642 1440,120 C 1440,120 1440,600 1440,600 Z"></path>
           <path id="header-deco-2" d="M 0,600 C 0,600 0,240 0,240 C 98.97607655502392,258.2105263157895 197.95215311004785,276.4210526315789 278,282 C 358.04784688995215,287.5789473684211 419.16746411483257,280.5263157894737 524,265 C 628.8325358851674,249.4736842105263 777.377990430622,225.47368421052633 888,211 C 998.622009569378,196.52631578947367 1071.3205741626793,191.57894736842107 1157,198 C 1242.6794258373207,204.42105263157893 1341.3397129186603,222.21052631578948 1440,240 C 1440,240 1440,600 1440,600 Z"></path>
           <path id="header-deco-3" d="M 0,600 C 0,600 0,360 0,360 C 65.43540669856458,339.55023923444975 130.87081339712915,319.1004784688995 245,321 C 359.12918660287085,322.8995215311005 521.9521531100479,347.1483253588517 616,352 C 710.0478468899521,356.8516746411483 735.3205741626795,342.3062200956938 822,333 C 908.6794258373205,323.6937799043062 1056.7655502392345,319.62679425837325 1170,325 C 1283.2344497607655,330.37320574162675 1361.6172248803828,345.1866028708134 1440,360 C 1440,360 1440,600 1440,600 Z"></path>
           <path id="header-deco-4" d="M 0,600 C 0,600 0,480 0,480 C 70.90909090909093,494.91866028708137 141.81818181818187,509.8373205741627 239,499 C 336.18181818181813,488.1626794258373 459.6363636363636,451.5693779904306 567,446 C 674.3636363636364,440.4306220095694 765.6363636363636,465.88516746411483 862,465 C 958.3636363636364,464.11483253588517 1059.8181818181818,436.8899521531101 1157,435 C 1254.1818181818182,433.1100478468899 1347.090909090909,456.555023923445 1440,480 C 1440,480 1440,600 1440,600 Z"></path>
       </svg>

       <div class="card card-style">
           <div class="content">
               <h1 class="mb-0 pt-2">Sign Up</h1>
               <p class="pb-2">
                   Invest securely in stocks, currencies and crypto tradings. earn daily ROI on your deposits. Withdraw at any time with no add-on withdrawal fee! Enter yourlegal details to open an account.
               </p>
               <form id="registrationForm">
                {% csrf_token %}
                    <div class="form-custom form-label form-border form-icon mb-3 bg-transparent">
                        <i class="bi bi-person-circle font-13"></i>
                        <input name="firstname" type="text" class="form-control rounded-xs" id="c1" placeholder="First name"/>
                        <label for="c1" class="color-theme">First Name</label>
                        <span>(required)</span>
                    </div>
                    <div class="form-custom form-label form-border form-icon mb-3 bg-transparent">
                        <i class="bi bi-person-circle font-13"></i>
                        <input name="lastname" type="text" class="form-control rounded-xs" id="c1" placeholder="Last name" />
                        <label for="c1" class="color-theme">Last Name</label>
                        <span>(required)</span>
                    </div>
                    <div class="form-custom form-label form-border form-icon mb-3 bg-transparent">
                        <i class="bi bi-person-circle font-13"></i>
                        <input name="username" type="text" class="form-control rounded-xs" id="c1" placeholder="Username" />
                        <label for="c1" class="color-theme">Username</label>
                        <span>(required)</span>
                    </div>
                    <div class="form-custom form-label form-border form-icon mb-3 bg-transparent">
                        <i class="bi bi-at font-16"></i>
                        <input name="email" type="email" class="form-control rounded-xs" id="c1" placeholder="Email Address"/>
                        <label for="c1" class="color-theme">Email Address</label>
                        <span>(required)</span>
                    </div>
                    <div class="form-custom form-label form-icon mb-3">
                        <i class="bi bi-check-circle font-13"></i>
                        <select style="appearance: none; background-color: black; color: #fff;" name="nationality" class="form-select rounded-xs" id="c6" aria-label="Floating label select example">
                            <option value="united-kingdom">United Kingdom</option>
                            <option value="united-states">United States</option>
                            <option disabled value=""></option>
                            <option value="" selected disabled>Select a Country</option>
                            <option value="afghanistan">Afghanistan</option>
                            <option value="albania">Albania</option>
                            <option value="algeria">Algeria</option>
                            <option value="andorra">Andorra</option>
                            <option value="angola">Angola</option>
                            <option value="antigua-and-barbuda">Antigua and Barbuda</option>
                            <option value="argentina">Argentina</option>
                            <option value="armenia">Armenia</option>
                            <option value="australia">Australia</option>
                            <option value="austria">Austria</option>
                            <option value="azerbaijan">Azerbaijan</option>
                            <option value="bahamas">Bahamas</option>
                            <option value="bahrain">Bahrain</option>
                            <option value="bangladesh">Bangladesh</option>
                            <option value="barbados">Barbados</option>
                            <option value="belarus">Belarus</option>
                            <option value="belgium">Belgium</option>
                            <option value="belize">Belize</option>
                            <option value="benin">Benin</option>
                            <option value="bhutan">Bhutan</option>
                            <option value="bolivia">Bolivia</option>
                            <option value="bosnia-and-herzegovina">Bosnia and Herzegovina</option>
                            <option value="botswana">Botswana</option>
                            <option value="brazil">Brazil</option>
                            <option value="brunei">Brunei</option>
                            <option value="bulgaria">Bulgaria</option>
                            <option value="burkina-faso">Burkina Faso</option>
                            <option value="burundi">Burundi</option>
                            <option value="cabo-verde">Cabo Verde</option>
                            <option value="cambodia">Cambodia</option>
                            <option value="cameroon">Cameroon</option>
                            <option value="canada">Canada</option>
                            <option value="central-african-republic">Central African Republic</option>
                            <option value="chad">Chad</option>
                            <option value="chile">Chile</option>
                            <option value="china">China</option>
                            <option value="colombia">Colombia</option>
                            <option value="comoros">Comoros</option>
                            <option value="congo-democratic-republic">Congo (Democratic Republic)</option>
                            <option value="congo-republic">Congo (Republic)</option>
                            <option value="costa-rica">Costa Rica</option>
                            <option value="cote-divoire">Côte d'Ivoire</option>
                            <option value="croatia">Croatia</option>
                            <option value="cuba">Cuba</option>
                            <option value="cyprus">Cyprus</option>
                            <option value="czech-republic">Czech Republic</option>
                            <option value="denmark">Denmark</option>
                            <option value="djibouti">Djibouti</option>
                            <option value="dominica">Dominica</option>
                            <option value="dominican-republic">Dominican Republic</option>
                            <option value="east-timor">East Timor (Timor-Leste)</option>
                            <option value="ecuador">Ecuador</option>
                            <option value="egypt">Egypt</option>
                            <option value="el-salvador">El Salvador</option>
                            <option value="equatorial-guinea">Equatorial Guinea</option>
                            <option value="eritrea">Eritrea</option>
                            <option value="estonia">Estonia</option>
                            <option value="eswatini">Eswatini</option>
                            <option value="ethiopia">Ethiopia</option>
                            <option value="fiji">Fiji</option>
                            <option value="finland">Finland</option>
                            <option value="france">France</option>
                            <option value="gabon">Gabon</option>
                            <option value="gambia">Gambia</option>
                            <option value="georgia">Georgia</option>
                            <option value="germany">Germany</option>
                            <option value="ghana">Ghana</option>
                            <option value="greece">Greece</option>
                            <option value="grenada">Grenada</option>
                            <option value="guatemala">Guatemala</option>
                            <option value="guinea">Guinea</option>
                            <option value="guinea-bissau">Guinea-Bissau</option>
                            <option value="guyana">Guyana</option>
                            <option value="haiti">Haiti</option>
                            <option value="honduras">Honduras</option>
                            <option value="hungary">Hungary</option>
                            <option value="iceland">Iceland</option>
                            <option value="india">India</option>
                            <option value="indonesia">Indonesia</option>
                            <option value="iran">Iran</option>
                            <option value="iraq">Iraq</option>
                            <option value="ireland">Ireland</option>
                            <option value="israel">Israel</option>
                            <option value="italy">Italy</option>
                            <option value="jamaica">Jamaica</option>
                            <option value="japan">Japan</option>
                            <option value="jordan">Jordan</option>
                            <option value="kazakhstan">Kazakhstan</option>
                            <option value="kenya">Kenya</option>
                            <option value="kiribati">Kiribati</option>
                            <option value="korea-north">Korea (North)</option>
                            <option value="korea-south">Korea (South)</option>
                            <option value="kosovo">Kosovo</option>
                            <option value="kuwait">Kuwait</option>
                            <option value="kyrgyzstan">Kyrgyzstan</option>
                            <option value="laos">Laos</option>
                            <option value="latvia">Latvia</option>
                            <option value="lebanon">Lebanon</option>
                            <option value="lesotho">Lesotho</option>
                            <option value="liberia">Liberia</option>
                            <option value="libya">Libya</option>
                            <option value="liechtenstein">Liechtenstein</option>
                            <option value="lithuania">Lithuania</option>
                            <option value="luxembourg">Luxembourg</option>
                            <option value="madagascar">Madagascar</option>
                            <option value="malawi">Malawi</option>
                            <option value="malaysia">Malaysia</option>
                            <option value="maldives">Maldives</option>
                            <option value="mali">Mali</option>
                            <option value="malta">Malta</option>
                            <option value="marshall-islands">Marshall Islands</option>
                            <option value="mauritania">Mauritania</option>
                            <option value="mauritius">Mauritius</option>
                            <option value="mexico">Mexico</option>
                            <option value="micronesia">Micronesia</option>
                            <option value="moldova">Moldova</option>
                            <option value="monaco">Monaco</option>
                            <option value="mongolia">Mongolia</option>
                            <option value="montenegro">Montenegro</option>
                            <option value="morocco">Morocco</option>
                            <option value="mozambique">Mozambique</option>
                            <option value="myanmar">Myanmar</option>
                            <option value="namibia">Namibia</option>
                            <option value="nauru">Nauru</option>
                            <option value="nepal">Nepal</option>
                            <option value="netherlands">Netherlands</option>
                            <option value="new-zealand">New Zealand</option>
                            <option value="nicaragua">Nicaragua</option>
                            <option value="niger">Niger</option>
                            <option value="nigeria">Nigeria</option>
                            <option value="north-macedonia">North Macedonia</option>
                            <option value="norway">Norway</option>
                            <option value="oman">Oman</option>
                            <option value="pakistan">Pakistan</option>
                            <option value="palau">Palau</option>
                            <option value="panama">Panama</option>
                            <option value="papua-new-guinea">Papua New Guinea</option>
                            <option value="paraguay">Paraguay</option>
                            <option value="peru">Peru</option>
                            <option value="philippines">Philippines</option>
                            <option value="poland">Poland</option>
                            <option value="portugal">Portugal</option>
                            <option value="qatar">Qatar</option>
                            <option value="romania">Romania</option>
                            <option value="russia">Russia</option>
                            <option value="rwanda">Rwanda</option>
                            <option value="saint-kitts-and-nevis">Saint Kitts and Nevis</option>
                            <option value="saint-lucia">Saint Lucia</option>
                            <option value="saint-vincent-and-the-grenadines">Saint Vincent and the Grenadines</option>
                            <option value="samoa">Samoa</option>
                            <option value="san-marino">San Marino</option>
                            <option value="sao-tome-and-principe">São Tomé and Príncipe</option>
                            <option value="saudi-arabia">Saudi Arabia</option>
                            <option value="senegal">Senegal</option>
                            <option value="serbia">Serbia</option>
                            <option value="seychelles">Seychelles</option>
                            <option value="sierra-leone">Sierra Leone</option>
                            <option value="singapore">Singapore</option>
                            <option value="slovakia">Slovakia</option>
                            <option value="slovenia">Slovenia</option>
                            <option value="solomon-islands">Solomon Islands</option>
                            <option value="somalia">Somalia</option>
                            <option value="south-africa">South Africa</option>
                            <option value="south-sudan">South Sudan</option>
                            <option value="spain">Spain</option>
                            
                            <option value="sri-lanka">Sri Lanka</option>
                            <option value="sudan">Sudan</option>
                            <option value="suriname">Suriname</option>
                            <option value="sweden">Sweden</option>
                            <option value="switzerland">Switzerland</option>
                            <option value="syria">Syria</option>
                            <option value="taiwan">Taiwan</option>
                            <option value="tajikistan">Tajikistan</option>
                            <option value="tanzania">Tanzania</option>
                            <option value="thailand">Thailand</option>
                            <option value="togo">Togo</option>
                            <option value="tonga">Tonga</option>
                            <option value="trinidad-and-tobago">Trinidad and Tobago</option>
                            <option value="tunisia">Tunisia</option>
                            <option value="turkey">Turkey</option>
                            <option value="turkmenistan">Turkmenistan</option>
                            <option value="tuvalu">Tuvalu</option>
                            <option value="uganda">Uganda</option>
                            <option value="ukraine">Ukraine</option>
                            <option value="united-arab-emirates">United Arab Emirates</option>
                            <option value="uruguay">Uruguay</option>
                            <option value="uzbekistan">Uzbekistan</option>
                            <option value="vanuatu">Vanuatu</option>
                            <option value="vatican-city">Vatican City</option>
                            <option value="venezuela">Venezuela</option>
                            <option value="vietnam">Vietnam</option>
                            <option value="yemen">Yemen</option>
                            <option value="zambia">Zambia</option>
                            <option value="zimbabwe">Zimbabwe</option>
                        </select>
                        <label for="c6" class="color-theme">Select an Option</label>
                    </div>
                    <div class="card card-style">
                        <div class="content">
                            <h6>File Upload</h6>
                            <p class="pb-3">
                                Upload a face-only photo.
                            </p>
                            <div class="divider mb-0"></div>
                            <div class="file-data">
                                <img id="image-data" src="" class="img-fluid rounded-s" alt="none">
                                <span class="upload-file-name d-block text-center"
                                    data-text-before="<i class='bi bi-check-circle-fill color-green-dark pe-2'></i> Image:"
                                    data-text-after=" is ready.">
                                </span>
                                <div>
                                    <input name="picture" capture="user" type="file" class="upload-file pb-4" accept="image/*">
                                    <p class="btn btn-full btn-m text-uppercase font-700 rounded-s upload-file-text bg-green-dark">Upload Image</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-custom form-label form-border form-icon mb-3 bg-transparent">
                        <i class="bi bi-asterisk font-13"></i>
                        <input name="password1" type="password" class="form-control rounded-xs" id="c2" placeholder="Choose Password"/>
                        <label for="c2" class="color-theme">Choose Password</label>
                        <span>(required)</span>
                    </div>
                    <div class="form-custom form-label form-border form-icon mb-4 bg-transparent">
                        <i class="bi bi-asterisk font-13"></i>
                        <input name="password2" type="password" class="form-control rounded-xs" id="c3" placeholder="Confirm Password"/>
                        <label for="c3" class="color-theme">Confirm Password</label>
                        <span>(required)</span>
                    </div>
                    <div class="form-check form-check-custom">
                        <input class="form-check-input" type="checkbox" name="consent" value="agree" id="c2a">
                        <label class="form-check-label font-12" for="c2a">I agree with the <a href="{% url 'terms' %}">Terms and Conditions</a>.</label>
                        <i class="is-checked color-highlight font-13 bi bi-check-circle-fill"></i>
                        <i class="is-unchecked color-highlight font-13 bi bi-circle"></i>
                    </div>
                    <small style="display: none;" id="consentError" class="color-red-dark">You have not checked this</small>

                    <!-- Submit -->
                    <input id="submitButton" value="Create Account" type="submit" style="width: 100%;" class="btn btn-full gradient-highlight shadow-bg shadow-bg-s mt-4" /> 

                    <div id="requestLoader" style="
                    display: none; 
                    justify-content: center; 
                    align-items: center; 
                    width: 100%;">
                        <div class="spinner-border color-highlight" role="status"></div>
                    </div>
                    
                
                    <div class="row">
                        <div class="col-6 text-start">
                            <a href="{% url 'password_reset' %}" class="font-11 color-theme opacity-40 pt-4 d-block">Forgot Password?</a>
                        </div>
                        <div class="col-6 text-end">
                            <a href="{% url 'login' %}" class="font-11 color-theme opacity-40 pt-4 d-block">Sign In Account</a>
                        </div>
                    </div>
                </form>
           </div>
       </div>

    </div>
    <!-- End of Page Content-->

    <!-- Off Canvas and Menu Elements-->
    <!-- Always outside the Page Content-->

    <!-- request Successful-->
    <div id="menu-request-ok" style="width:320px" class="offcanvas offcanvas-modal offcanvas-detached rounded-m">
        <div class="content text-center">
            <i style="font-size:65px;"
                class="scale-box bi bi-check-circle-fill color-green-dark shadow-s rounded-circle p-0 mt-3 mb-3 d-inline-block"></i>
            <h1 class="pt-3 font-28">Success</h1>
            <p id="successMessage" class="font-14">
                
            </p>
            <a href="#" data-bs-toggle="offcanvas" class="btn btn-full gradient-green shadow-bg shadow-bg-xs">Okay</a>
        </div>
    </div>
    
    <!-- request Pending-->
    <div id="menu-request-pending" style="width:320px" class="offcanvas offcanvas-modal offcanvas-detached rounded-m">
        <div class="content text-center">
            <i style="font-size:65px;"
                class="scale-box bi bi-question-circle-fill color-blue-dark shadow-s rounded-circle p-0 mt-3 mb-3 d-inline-block"></i>
            <h1 class="pt-3 font-28">Verification required</h1>
            <p id="pendingMessage" class="font-14">
                
            </p>
            <a id="verifyButton" href="#" data-bs-toggle="offcanvas" class="btn btn-full gradient-blue shadow-bg shadow-bg-xs">Verify</a>
        </div>
    </div>
    
    <!-- request Failed-->
    <div id="menu-request-error" style="width:320px" class="offcanvas offcanvas-modal offcanvas-detached rounded-m">
        <div class="content text-center">
            <i style="font-size:65px;"
                class="scale-box bi bi-x-circle-fill color-red-dark shadow-s rounded-circle p-0 mt-3 mb-3 d-inline-block"></i>
            <h1 class="pt-3 font-28">Something is wrong</h1>
            <p id="errorMessage" class="font-14 mb-3">
                
            </p>
            <!-- <a href="tel:+1 234 567 155" class="py-4 font-700 text-uppercase d-block">Tap to Call Support</a> -->
            <a href="#" data-bs-toggle="offcanvas" class="btn btn-full gradient-red shadow-bg shadow-bg-xs">Dismiss</a>
        </div>
    </div>
    <!-- Installation prompt -->
    <!-- ios -->
            <div class="offcanvas offcanvas-bottom rounded-m offcanvas-detached" id="menu-install-pwa-ios">
                <div class="content">
                    <img src="{% static 'app/icons/icon-128x128.png' %}" alt="img" width="80" class="rounded-m mx-auto my-4">
                    <h1 class="text-center">Install myPurse app</h1>
                    <p class="boxed-text-xl">
                        myPurse is better experienced as a native app. Open your Safari menu <img
                            src="{% static 'images/pictures/safari.png' %}" alt="safari" style="background-color: #fff;"
                            height="20px" width="20px"> and tap "Add to Home Screen to install".
                    </p>
                    <a href="#"
                        class="pwa-dismiss close-menu color-theme text-uppercase font-900 opacity-50 font-11 text-center d-block mt-n2"
                        data-bs-dismiss="offcanvas">Maybe Later</a>
                </div>
            </div>
            <!-- Android -->
            <div class="offcanvas offcanvas-bottom rounded-m offcanvas-detached" id="menu-install-pwa-android">
                <div class="content">
                    <img src="{% static 'app/icons/icon-128x128.png' %}" alt="img" width="80" class="rounded-m mx-auto my-4">
                    <h1 class="text-center">Install myPurse</h1>
                    <p class="boxed-text-l">
                        Install myPurse to enjoy a unique and native experience.
                    </p>
                    <a href="#"
                        class="pwa-install btn btn-m rounded-s text-uppercase font-900 gradient-highlight shadow-bg shadow-bg-s btn-full">Add
                        to Home Screen</a><br>
                    <a href="#" data-bs-dismiss="offcanvas"
                        class="pwa-dismiss close-menu color-theme text-uppercase font-900 opacity-60 font-11 text-center d-block mt-n1">Maybe
                        later</a>
                </div>
            </div>
            <!-- Prompt ends here -->
    <!-- Main Sidebar Menu -->
    <div id="menu-sidebar" style=" width: 250px;"
        data-menu-active="nav-pages"
        class="offcanvas offcanvas-start offcanvas-detached rounded-m">
        <div class="list-group list-custom list-group-m rounded-xs pt-4">
            <a target="_blank" href="https://myprofitpurse.com/home" class="list-group-item pt-2">
                <div>Visit Our website</div>
                <i class="bi bi-chevron-right"></i>
            </a>
            <a href="{% url 'terms' %}" class="list-group-item pt-2">
                <div>Terms of service</div>
                <i class="bi bi-chevron-right"></i>
            </a>
            <a href="{% url 'terms' %}?#policy-section" class="list-group-item pt-2">
                <div>Privacy policies.</div>
                <i class="bi bi-chevron-right"></i>
            </a>
        </div>
    </div>
	
	<!-- Highlights Menu -->
	<div id="menu-highlights"
		data-menu-load="menu-highlights.html"
		class="offcanvas offcanvas-bottom offcanvas-detached rounded-m">
	</div>
</div>
<script src="{% static 'scripts/bootstrap.min.js' %}"></script>
<script src="{% static 'scripts/custom.js' %}"></script>
<script>
    function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');

    var consent = document.getElementById('c2a');
    var successMessage = document.getElementById('successMessage');
    var pendingMessage = document.getElementById('pendingMessage');
    var errorMessage = document.getElementById('errorMessage');
    var verifyButton = document.getElementById('verifyButton');
    var loader = document.getElementById('requestLoader');
    var page = document.getElementById('page');
    var submitButton = document.getElementById('submitButton');


    consent.addEventListener('change', function() {
        if (!this.checked) {
            document.getElementById('consentError').style.display = 'block';
            
            return false;
        } else {
            document.getElementById('consentError').style.display = 'none';
        }
    });

    // process form and send to backend for enhanced processing. 
    var registrationForm = document.getElementById('registrationForm');
    registrationForm.addEventListener('submit', submitForm)
    function submitForm(e) {
        e.preventDefault();
        loader.style.display = 'flex';
        submitButton.style.display = 'none';
        if (!consent.checked) {
            document.getElementById('consentError').style.display = 'block';
            setTimeout(reset, 500)
            return false;
        }
        const formElements = this.elements;
        for (var i = 0; i < formElements.length; i++)
            if (formElements[i].type !== 'submit' && formElements[i].value === ''){
                setTimeout(reset, 1000)
                errorMessage.innerText = 'you need to enter all the required informations to submit this form. Specifically, you have not entered your ' + formElements[i].name;
                showOffcanvas('menu-request-error')
                return false;
            }
            if (formElements['password1'].value !== formElements['password2'].value) {
                setTimeout(reset, 1000)
                errorMessage.innerText = 'Looks like your passwords do not match'
                showOffcanvas('menu-request-error')                
                return false;
            }
            if (formElements['password1'].value.length < 6 ){
                setTimeout(reset, 1000)
                errorMessage.innerText = 'Your password must be at least 6 characters long'
                showOffcanvas('menu-request-error')                
                return false;
            }
            var data = new FormData(this);
            url = '{% url "signup" %}'
            fetch(url, {
                method: 'POST',
                body: data,
                headers: {
                    'X-CSRFToken': getCookie('csrftoken'),
                },
            })
            .then(response => response.json())
            .then(data => {
               if (!data.success){
                if (data.verify){
                    setTimeout(reset, 1000)
                    verifyButton.addEventListener('click', function () {
                        const email = formElements['email'].value
                        var raw_url = '{% url "email_verification" "placeholder" %}'
                        var url = raw_url.replace('placeholder', email)
                        window.location.href = url;
                    });
                    pendingMessage.innerText = data.verify
                    showOffcanvas('menu-request-pending')
                    
                    
                } 
                else if (data.error){
                    setTimeout(reset, 1000)
                    errorMessage.innerText = data.error
                    showOffcanvas('menu-request-error')
                    formElements['password1'].value = '';
                    formElements['password2'].value = '';
                    return;
                }
               }
               else {
                setTimeout(reset, 1000)
                successMessage.innerText = data.success
                showOffcanvas('menu-request-ok')
                return;
               }
            })
            .catch(error => {
                setTimeout(reset, 1000)
                errorMessage.innerText = 'Something went wrong: ' + error;
                showOffcanvas('menu-request-error')
            });
    }; 





    // show alerts 
    function showOffcanvas(offcanvasId) {
            var offcanvasElement = document.getElementById(offcanvasId);
            var bsOffcanvas = new bootstrap.Offcanvas(offcanvasElement);
            bsOffcanvas.show();
        }
               
    function reset() {
            submitButton.style.display = "block";
            loader.style.display = "none";
        }

</script>
<!-- End of Page ID-->
</body>